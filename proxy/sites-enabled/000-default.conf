<VirtualHost *:80>
        ServerName example.com

        ProxyPreserveHost On

        # ProxyHTMLURLMap passt Links im HTML/JavaScript Source an
        ProxyHTMLURLMap /smartvisu/  /smartvisu/
        ProxyHTMLURLMap /fhem/      /fhem/
        # AuthType Basic
        # AuthName "Password Required"
        # AuthUserFile /etc/fhem-htpasswd
        # Require user klaus

        RewriteEngine On
        RewriteCond %{HTTP:Upgrade} =websocket [NC]
        RewriteRule /fhem(.*)           ws://fhem:8083/fhem$1 [P,L]
        # RewriteRule /smartvisu(.*)      ws://smartvisu:80/$1 [P,L]
        RewriteCond %{HTTP:Upgrade} !=websocket [NC]
        RewriteRule /fhem(.*)           http://fhem:8083/fhem$1 [P,L]
        # RewriteRule /smartvisu(.*)      http://smartvisu:80/$1 [P,L]

        ProxyPass /fhem http://fhem:8083/fhem
        ProxyPassReverse /fhem http://fhem:8083/fhem

        ProxyPass /smartvisu http://smartvisu/
        ProxyPassReverse /smartvisu https://smartvisu/

        ErrorLog /var/log/apache2/example.com-error.log
        CustomLog /var/log/apache2/example.com-access.log combined

</VirtualHost>

